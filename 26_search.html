<html>
    <head>
        <title>검색</title>
        <style>
            body {
                background-color:#e1e5ea;
            }
            .search_wrapper {
                display:flex;
                flex-direction:row;
                align-items:center;
                margin:100px auto 0;
                padding:6px 12px;
                width:500px;
                box-sizing:border-box;
                background-color:#eec4c4;
                border-radius:40px;
            }
            input {
                outline-style:none;
                flex:.9;
                padding:12px 0;
                border:0;
                background-color: #eec4c4;
                font-size:17px;
                font-weight:600;
                color:#c46475;
            }
            input::placeholder{
                color:#da7f8f;
            }
            i.fa-search {
                padding:12px;
                color:#da7f8f;
            }
            .result_wrapper {
                margin:12px auto;
                width:500px;
                box-sizing:border-box;
            }
            .line {
                padding:8px;
                background-color:white;
                color:#707070;
            }
            .line.no_data {
                color:#a1a1a1;
            }
        </style>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/39309507ae.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="search_wrapper">
            <i class="fas fa-search fa-lg"></i>
            <input placeholder="검색어를 입력해 주세요"/>
        </div>
        <div class="result_wrapper">
<!--
            <div class="line">검색결과표시</div>
            <div class="line no_data">검색 결과가 없습니다 <i class="far fa-sad-tear"></i></div>
-->
        </div>
    
        <script>
            
            // 키보드 이벤트 함수 실행
            // 사용자가 입력한 값(글자) 얻어오기
            // 공백이 아닐 때만 http 통신 실행
            
            // url >>  http://kimdev.cafe24.com:3000/mega/test/name
            // data >> keyword
            // method >> GET
            // response >> [{idx:1, name:홍길동}]
            $("input").on("keyup", function(){
                let value = $(this).val();
                
                // list 삭제
                $(".line").remove();
                
                if (value != "") {
                    $.ajax({
                        url : "http://kimdev.cafe24.com:3000/mega/test/name",
                        data : {keyword : value},
                        method : "GET",
                        dataType : "json",
                        success : function(data){
                            if (data.result) {
                                let list = data.data.result_list;
                                let total = list.length;
                                
                                if (total > 0) {
                                    // 결과 값이 1개 이상 있을 때
                                    for (let i=0; i<total; i++) {
                                        // 검색 결과 이름을 화면에 보여준다
                                        let ele = $("<div class='line'></div>").text(list[i].name);
                                        
                                        $(".result_wrapper").append(ele);
                                    }                                    
                                } else {
                                    // 검색 결과가 없을 때
                                    // 검색 결과가 없습니다 요소를 화면에 보여준다
                                    let ele = $("<div class='line no_data'>검색 결과가 없습니다 <i class='far fa-sad-tear'></i></div>");
                                    
                                    $(".result_wrapper").append(ele);
                                    
                                }
                                
                            }
                        },
                        error : function(err){
                            console.log("http 통신 오류 발생 ", err);
                        }
                    });
                }
                
            });
            
            
        </script>
      </body>
</html>












